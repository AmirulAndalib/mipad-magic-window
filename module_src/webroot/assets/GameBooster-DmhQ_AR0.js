import{A as q,B as ie,C as pe,D as de,E as ce,F as Fe,d as J,G as ge,r as B,h as X,H as me,q as Ee,i as Z,j as h,e as c,f as Y,k as ee,I as ve,J as fe,K as Ce,t as e,b as o,v as l,l as t,L as j,M as ue,m as te,p as ae,N as Be,O as _e,P as Ae,Q as ye,g as A,n as H,c as De,R as k,S as be,T as O,U as Te,V as ke,W as Re,X as Oe,Y as Q,Z as Ge,$ as we,a0 as Ie,a1 as xe,a2 as Se,a3 as Me,a4 as W,a5 as Ne,a6 as Ve,a7 as ze,a8 as Ue}from"./index-Bs8Z_P7F.js";function $e(g,i,p,s){return q(g,function(f,C,m){i(s,p(f),C,m)}),s}function Le(g,i){return function(p,s){return $e(p,g,i(s),{})}}var We=Object.prototype,Ye=We.toString,oe=Le(function(g,i,p){i!=null&&typeof i.toString!="function"&&(i=Ye.call(i)),g[i]=p},ie(pe));function z(g,i){var p={};return i=de(i),q(g,function(s,f,C){ce(p,i(s,f,C),s)}),p}const Ke=oe({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),Pe={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},ne=g=>{console.log(g,"inputArr");const i=Fe(g);let p=Object.entries(Ke).map(([s,f])=>{const C=Pe[f];return{label:C.name,value:s,type:C.type,color:C.color}});return i&&(p=[...p,...i]),p},je=oe({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),He={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},le=()=>Object.entries(je).map(([g,i])=>{const p=He[i];return{label:p.name,value:g,color:p.color}}),Qe=J({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(g,{expose:i,emit:p}){ge(),B(null),B(null);const s=g,f=B(!1),C=ne([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),m=z(C,r=>r.value),N=le(),d=z(N,r=>r.value),S=X();me(),Ee();const R=Z(()=>({theme:S.isDarkMode?te:ae})),{message:U,modal:G}=h(["message","modal"],{configProviderProps:R});let M,w;const V=B({openDrawer:r=>new Promise((a,_)=>{if(s.type==="update"&&!r){_(new Error("更新模式下必须传入初始化参数")),U.error("初始化参数不能为空");return}s.type==="update"&&(x.value=(r==null?void 0:r.packageName)||"",I.value=(r==null?void 0:r.appName)||"",r!=null&&r.gameGravity&&(b.value=d[r.gameGravity]),r!=null&&r.gameRatio&&(m[r.gameRatio]?(E.value=m[r.gameRatio],y.value=r.gameRatio):(E.value=m.custom,y.value=r.gameRatio))),M=a,w=_,f.value=!0}),closeDrawer:()=>{f.value=!1,w("Drawer closed without submission")}}),I=B(""),x=B(""),b=B(N[0]),E=B(C[0]),y=B(""),n=(r,a)=>{if(a.value==="custom"&&!S.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO){G.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>e("div",null,[e("p",null,[l("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),e("p",null,[l("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),e("p",null,[l("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])});return}E.value=a,a.value==="custom"?y.value="":y.value=a.value},u=(r,a)=>{b.value=a},T=async()=>{if(!y.value){G.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>e("p",null,[l("噫？游戏显示比例不能为空（敲")])});return}v.value=!0;const r=()=>{v.value=!1,f.value=!1},a=()=>{v.value=!1},_={appName:I.value,packageName:x.value,gameGravity:b.value.value,gameRatio:y.value,loadingCallback:a,closeCallback:r};G.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>e("p",null,[l("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{M(_),a(),r()},onNegativeClick(){a()},onMaskClick(){a()},onClose(){a()}})},v=B(!1);return i({openDrawer:V.value.openDrawer}),(r,a)=>{const _=c("n-input-group-label"),D=c("n-input"),$=c("n-input-group"),L=c("n-button"),K=c("n-dropdown"),P=c("n-card"),re=c("n-drawer-content"),se=c("n-drawer");return Y(),ee(ue,null,[ve(r.$slots,"default",fe(Ce({openDrawer:V.value.openDrawer}))),e(se,{show:f.value,"onUpdate:show":a[7]||(a[7]=F=>f.value=F),width:t(S).windowWidth>=640?"450px":"100%",placement:"right"},{default:o(()=>[e(re,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:s.title,closable:""},{footer:o(()=>[e(L,{type:"info",loading:v.value,"onUpdate:loading":a[5]||(a[5]=F=>v.value=F),onClick:a[6]||(a[6]=()=>T())},{default:o(()=>a[10]||(a[10]=[l(" 提交 ")])),_:1},8,["loading"])]),default:o(()=>[e($,null,{default:o(()=>[e(_,{size:"large"},{default:o(()=>a[8]||(a[8]=[l("游戏名称")])),_:1}),e(D,{size:"large",value:I.value,"onUpdate:value":a[0]||(a[0]=F=>I.value=F),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])]),_:1}),e($,{class:"mt-5"},{default:o(()=>[e(_,{size:"large"},{default:o(()=>a[9]||(a[9]=[l("游戏包名")])),_:1}),e(D,{size:"large",value:x.value,"onUpdate:value":a[1]||(a[1]=F=>x.value=F),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])]),_:1}),e(P,{bordered:!1,title:"游戏显示比例",size:"small"},{default:o(()=>[e(K,{value:E.value,"onUpdate:value":a[2]||(a[2]=F=>E.value=F),size:"large",trigger:"click",options:t(C),onSelect:n},{default:o(()=>{var F;return[e(L,{block:"",type:E.value.type,color:(F=E.value.color)==null?void 0:F.textColor,dashed:""},{default:o(()=>[l(j(E.value.label),1)]),_:1},8,["type","color"])]}),_:1},8,["value","options"]),e($,{class:"mt-5"},{default:o(()=>[e(D,{type:"number",ref:"currentCustomGameRatioRef",readonly:E.value.value!=="custom",value:y.value,"onUpdate:value":a[3]||(a[3]=F=>y.value=F),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])]),_:1})]),_:1}),e(P,{bordered:!1,title:"游戏显示位置",size:"small"},{default:o(()=>[e(K,{value:b.value,"onUpdate:value":a[4]||(a[4]=F=>b.value=F),size:"large",trigger:"click",options:t(N),onSelect:u},{default:o(()=>[e(L,{block:"",type:b.value.color,dashed:""},{default:o(()=>[l(j(b.value.label),1)]),_:1},8,["type"])]),_:1},8,["value","options"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}}),qe={class:"autoui-view mb-10"},Je={class:"mt-3"},Xe={class:"mb-3 px-4 sm:px-0"},Ze={class:"mb-3 flex flex-wrap"},he={class:"flex flex-wrap"},eu={class:"flex flex-wrap"},tu=J({__name:"GameBooster",setup(g){const i=B(null),p=y(),s=X();Be();const f=Z(()=>({theme:s.isDarkMode?te:ae})),{message:C,modal:m,notification:N}=h(["message","modal","notification"],{configProviderProps:f}),d=_e(),S=ne(),R=z(S,n=>n.value),U=le(),G=z(U,n=>n.value),M=Ae(),w=B(null),V=async()=>{if(!M.isSupportGameMode.value){m.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>e("p",null,[l("未开启游戏显示布局，请先前往模块设置进行开启~")])});return}const[n,u]=await W(Ne());n&&m.create({title:"操作失败",type:"error",preset:"dialog",content:()=>e("p",null,[l("发生异常错误，详细错误请查看日志~")])})},I=async()=>{m.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>e("div",null,[e("p",null,[l("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),e("p",null,[l("(Tips:需搭配核心破解并通过MT管理器安装)")]),e("p",null,[l("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}})},x=async(n,u)=>{if(!M.isSupportGameMode.value){m.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>e("p",null,[l("未开启游戏显示布局，请先前往模块设置进行开启~")])});return}if(w.value){const[T,v]=await W(w.value.openDrawer({appName:n.app_name,packageName:n.package_name,gameRatio:n.game_ratio,gameGravity:n.game_gravity}));if(T)console.log("操作取消:",T);else if(v){d.loading=!0;const[r,a]=await W(Ve(v.packageName,v.gameRatio,v.gameGravity));r&&(m.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>e("p",null,[l("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),d.loading=!1),a&&(d.loading=!1,m.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>e("p",null,[l("好耶w，已经成功配置")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[v.appName])," ",l("的游戏显示布局了OwO~实际生效还需要重启")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[v.appName])," ",l("和")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[l("平板/手机管家")])," ",l("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){ze(n.package_name).then(async _=>{await d.initDefault(),m.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>e("p",null,[l("已经成功为你重启对应的作用域，请查看是否生效~")])})}).catch(_=>{m.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>e("p",null,[l("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})})}}))}}},b=async()=>{await d.initDefault()},E=ye({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:n=>{E.page=n},onUpdatePageSize:n=>{E.pageSize=n,E.page=1}});function y(){return[{title:"游戏名称",minWidth:250,key:"name",render(n,u){return e("div",null,[n.app_name&&e("p",null,[n.app_name]),n.app_name&&e("p",null,[e("span",{class:{hidden:!n.app_name}},[l("(")]),n.package_name,e("span",{class:{hidden:!n.app_name}},[l(")")])])])}},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render(n,u){return R[n.game_ratio]&&R[n.game_ratio].label?e(c("n-tag"),{dashed:!0,type:R[n.game_ratio].type,color:R[n.game_ratio].color},{default:()=>[R[n.game_ratio].label]}):e(c("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[l("自定义")]})}},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render(n,u){return e(c("n-tag"),{dashed:!0,type:G[n.game_gravity].color},{default:()=>[G[n.game_gravity].label]})}},{title:"操作",minWidth:100,key:"setting",render(n,u){const T={icon:Ue};return e(c("n-button"),{onClick:()=>x(n),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[l("管理")],...T})}}]}return(n,u)=>{const T=c("n-alert"),v=c("n-dropdown"),r=c("n-input-group"),a=c("n-card"),_=c("n-data-table");return Y(),ee(ue,null,[A("main",qe,[A("div",Je,[A("div",Xe,[u[9]||(u[9]=A("h3",{class:H("text-base font-semibold leading-7")},[A("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":`linear-gradient(\r
								101.22deg,\r
								rgb(255, 182, 133) -18.32%,\r
								rgb(255, 111, 29) 7.01%,\r
								rgb(252, 181, 232) 41.59%,\r
								rgb(135, 148, 255) 70.98%,\r
								rgb(60, 112, 255) 91.35%,\r
								rgb(60, 112, 255) 110.17%\r
							)`}},"游戏显示布局")],-1)),A("p",{class:H(`mt-1 max-w-2xl text-sm leading-6 ${t(s).isDarkMode?"text-gray-300":"text-gray-500"}`)}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),e(a,{size:"small"},{default:o(()=>[A("div",Ze,[t(s).deviceCharacteristics==="tablet"?(Y(),De(T,{key:0,"show-icon":!0,type:"info"},{default:o(()=>[u[11]||(u[11]=A("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),u[12]||(u[12]=A("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),e(t(k),{strong:"",secondary:"",type:"info",onClick:u[0]||(u[0]=()=>I())},{default:o(()=>u[10]||(u[10]=[l("获取修改版手机/平板管家")])),_:1})]),_:1})):be("",!0)]),A("div",he,[e(t(k),{class:"mb-3 mr-3",type:"info",loading:t(s).loading||t(d).loading,onClick:u[1]||(u[1]=()=>V())},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Te))]),_:1})]),default:o(()=>[u[13]||(u[13]=l(" 添加游戏 "))]),_:1},8,["loading"]),e(t(k),{class:"mb-3 mr-3",type:"success",loading:t(s).loading||t(d).loading,onClick:u[2]||(u[2]=()=>b())},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(ke))]),_:1})]),default:o(()=>[u[14]||(u[14]=l(" 刷新游戏列表 "))]),_:1},8,["loading"])]),A("div",eu,[e(t(k),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:t(s).loading||t(d).loading,onClick:u[3]||(u[3]=()=>Re())},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Oe))]),_:1})]),default:o(()=>[u[15]||(u[15]=l(" 性能监视器 "))]),_:1},8,["loading"]),e(v,{size:"large",trigger:"click",options:[{label:"打开帧率监视器",key:"open"},{label:"关闭帧率监视器",key:"close"}],onSelect:u[4]||(u[4]=D=>{D==="open"?Q(!0):Q(!1)})},{default:o(()=>[e(t(k),{class:"mb-3 mr-3",type:"info",secondary:"",loading:t(s).loading||t(d).loading},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Ge))]),_:1})]),default:o(()=>[u[16]||(u[16]=l(" 帧率监视器 "))]),_:1},8,["loading"])]),_:1}),e(t(k),{class:"mb-3 mr-3",type:"error",secondary:"",loading:t(s).loading||t(d).loading,onClick:u[5]||(u[5]=()=>we())},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Ie))]),_:1})]),default:o(()=>[u[17]||(u[17]=l(" 超级小爱 "))]),_:1},8,["loading"])]),e(r,null,{default:o(()=>[e(t(xe),{size:"large",clearable:"",value:t(d).searchKeyWord,"onUpdate:value":u[6]||(u[6]=D=>t(d).searchKeyWord=D),ref_key:"searchKeyWordInput",ref:i,placeholder:"搜索游戏名称/游戏包名",autosize:"",style:{width:"80%"}},null,8,["value"]),e(t(k),{size:"large",type:"primary",onClick:u[7]||(u[7]=()=>{var D;(D=i.value)==null||D.blur()})},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Se))]),_:1})]),default:o(()=>[u[18]||(u[18]=l(" 搜索 "))]),_:1}),e(t(k),{size:"large",bordered:"",onClick:u[8]||(u[8]=()=>{t(d).searchKeyWord=""})},{icon:o(()=>[e(t(O),null,{default:o(()=>[e(t(Me))]),_:1})]),default:o(()=>[u[19]||(u[19]=l(" 清空 "))]),_:1})]),_:1})]),_:1}),e(_,{loading:t(s).loading||t(d).loading,columns:t(p),class:"mt-3",data:t(d).filterGameBoosterList,pagination:E},null,8,["loading","columns","data","pagination"])]),e(Qe,{ref_key:"updateGameBoosterAppDrawer",ref:w,type:"update",title:"更新设置"},null,512)],64)}}});export{tu as default};
