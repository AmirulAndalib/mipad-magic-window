import{A as H,B as se,C as ie,D as pe,E as de,F as ce,d as Q,G as Fe,r as C,h as q,H as ge,q as me,i as J,j as X,e as c,f as $,k as Z,I as Ee,J as ve,K as _e,t as e,b as l,v as n,l as r,L as h,M as ee,m as ue,p as te,N as fe,O as Be,P as Ce,Q as Ae,g as y,n as j,c as ye,R as w,S as De,T as N,U as be,V as Te,W as Oe,X as Re,Y as ke,Z as Y,$ as Ge,a0 as Ie,a1 as we,a2 as xe}from"./index-Zh2sICWJ.js";function Se(F,s,p,i){return H(F,function(_,B,f){s(i,p(_),B,f)}),i}function Me(F,s){return function(p,i){return Se(p,F,s(i),{})}}var Ne=Object.prototype,Ve=Ne.toString,ae=Me(function(F,s,p){s!=null&&typeof s.toString!="function"&&(s=Ve.call(s)),F[s]=p},se(ie));function V(F,s){var p={};return s=pe(s),H(F,function(i,_,B){de(p,s(i,_,B),i)}),p}const ze=ae({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),Ue={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},oe=F=>{console.log(F,"inputArr");const s=ce(F);let p=Object.entries(ze).map(([i,_])=>{const B=Ue[_];return{label:B.name,value:i,type:B.type,color:B.color}});return s&&(p=[...p,...s]),p},Le=ae({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),We={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},ne=()=>Object.entries(Le).map(([F,s])=>{const p=We[s];return{label:p.name,value:F,color:p.color}}),Ye=Q({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(F,{expose:s,emit:p}){Fe(),C(null),C(null);const i=F,_=C(!1),B=oe([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),f=V(B,o=>o.value),x=ne(),g=V(x,o=>o.value),I=q();ge(),me();const T=J(()=>({theme:I.isDarkMode?ue:te})),{message:z,modal:O}=X(["message","modal"],{configProviderProps:T});let S,R;const M=C({openDrawer:o=>new Promise((u,v)=>{if(i.type==="update"&&!o){v(new Error("更新模式下必须传入初始化参数")),z.error("初始化参数不能为空");return}i.type==="update"&&(G.value=(o==null?void 0:o.packageName)||"",k.value=(o==null?void 0:o.appName)||"",o!=null&&o.gameGravity&&(D.value=g[o.gameGravity]),o!=null&&o.gameRatio&&(f[o.gameRatio]?(m.value=f[o.gameRatio],A.value=o.gameRatio):(m.value=f.custom,A.value=o.gameRatio))),S=u,R=v,_.value=!0}),closeDrawer:()=>{_.value=!1,R("Drawer closed without submission")}}),k=C(""),G=C(""),D=C(x[0]),m=C(B[0]),A=C(""),t=(o,u)=>{if(u.value==="custom"&&!I.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO){O.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>e("div",null,[e("p",null,[n("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),e("p",null,[n("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),e("p",null,[n("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])});return}m.value=u,u.value==="custom"?A.value="":A.value=u.value},a=(o,u)=>{D.value=u},b=async()=>{if(!A.value){O.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>e("p",null,[n("噫？游戏显示比例不能为空（敲")])});return}E.value=!0;const o=()=>{E.value=!1,_.value=!1},u=()=>{E.value=!1},v={appName:k.value,packageName:G.value,gameGravity:D.value.value,gameRatio:A.value,loadingCallback:u,closeCallback:o};O.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>e("p",null,[n("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{S(v),u(),o()},onNegativeClick(){u()},onMaskClick(){u()},onClose(){u()}})},E=C(!1);return s({openDrawer:M.value.openDrawer}),(o,u)=>{const v=c("n-input-group-label"),U=c("n-input"),L=c("n-input-group"),W=c("n-button"),K=c("n-dropdown"),P=c("n-card"),le=c("n-drawer-content"),re=c("n-drawer");return $(),Z(ee,null,[Ee(o.$slots,"default",ve(_e({openDrawer:M.value.openDrawer}))),e(re,{show:_.value,"onUpdate:show":u[7]||(u[7]=d=>_.value=d),width:r(I).windowWidth>=640?"450px":"100%",placement:"right"},{default:l(()=>[e(le,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:i.title,closable:""},{footer:l(()=>[e(W,{type:"info",loading:E.value,"onUpdate:loading":u[5]||(u[5]=d=>E.value=d),onClick:u[6]||(u[6]=()=>b())},{default:l(()=>u[10]||(u[10]=[n(" 提交 ")])),_:1},8,["loading"])]),default:l(()=>[e(L,null,{default:l(()=>[e(v,{size:"large"},{default:l(()=>u[8]||(u[8]=[n("游戏名称")])),_:1}),e(U,{size:"large",value:k.value,"onUpdate:value":u[0]||(u[0]=d=>k.value=d),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])]),_:1}),e(L,{class:"mt-5"},{default:l(()=>[e(v,{size:"large"},{default:l(()=>u[9]||(u[9]=[n("游戏包名")])),_:1}),e(U,{size:"large",value:G.value,"onUpdate:value":u[1]||(u[1]=d=>G.value=d),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])]),_:1}),e(P,{bordered:!1,title:"游戏显示比例",size:"small"},{default:l(()=>[e(K,{value:m.value,"onUpdate:value":u[2]||(u[2]=d=>m.value=d),size:"large",trigger:"click",options:r(B),onSelect:t},{default:l(()=>{var d;return[e(W,{block:"",type:m.value.type,color:(d=m.value.color)==null?void 0:d.textColor,dashed:""},{default:l(()=>[n(h(m.value.label),1)]),_:1},8,["type","color"])]}),_:1},8,["value","options"]),e(L,{class:"mt-5"},{default:l(()=>[e(U,{type:"number",ref:"currentCustomGameRatioRef",readonly:m.value.value!=="custom",value:A.value,"onUpdate:value":u[3]||(u[3]=d=>A.value=d),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])]),_:1})]),_:1}),e(P,{bordered:!1,title:"游戏显示位置",size:"small"},{default:l(()=>[e(K,{value:D.value,"onUpdate:value":u[4]||(u[4]=d=>D.value=d),size:"large",trigger:"click",options:r(x),onSelect:a},{default:l(()=>[e(W,{block:"",type:D.value.color,dashed:""},{default:l(()=>[n(h(D.value.label),1)]),_:1},8,["type"])]),_:1},8,["value","options"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}}),$e={class:"autoui-view mb-10"},Ke={class:"mt-3"},Pe={class:"mb-3 px-4 sm:px-0"},he={class:"mb-3 flex flex-wrap"},je={class:"flex flex-wrap"},Qe=Q({__name:"GameBooster",setup(F){const s=C(null),p=A(),i=q();fe();const _=J(()=>({theme:i.isDarkMode?ue:te})),{message:B,modal:f,notification:x}=X(["message","modal","notification"],{configProviderProps:_}),g=Be(),I=oe(),T=V(I,t=>t.value),z=ne(),O=V(z,t=>t.value),S=Ce(),R=C(null),M=async()=>{const[t,a]=await Y(Ge());t&&f.create({title:"操作失败",type:"error",preset:"dialog",content:()=>e("p",null,[n("发生异常错误，详细错误请查看日志~")])})},k=async()=>{f.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>e("div",null,[e("p",null,[n("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),e("p",null,[n("(Tips:需搭配核心破解并通过MT管理器安装)")]),e("p",null,[n("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}})},G=async(t,a)=>{if(!S.isSupportGameMode.value){f.create({title:"未开启游戏显示布局",type:"error",preset:"dialog",content:()=>e("p",null,[n("未开启游戏显示布局，请先前往模块设置进行开启~")])});return}if(R.value){const[b,E]=await Y(R.value.openDrawer({appName:t.app_name,packageName:t.package_name,gameRatio:t.game_ratio,gameGravity:t.game_gravity}));if(b)console.log("操作取消:",b);else if(E){g.loading=!0;const[o,u]=await Y(Ie(E.packageName,E.gameRatio,E.gameGravity));o&&(f.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>e("p",null,[n("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),g.loading=!1),u&&(g.loading=!1,f.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>e("p",null,[n("好耶w，已经成功配置")," ",e("span",{class:`font-bold ${i.isDarkMode?"text-teal-400":"text-gray-600"}`},[E.appName])," ",n("的游戏显示布局了OwO~实际生效还需要重启")," ",e("span",{class:`font-bold ${i.isDarkMode?"text-teal-400":"text-gray-600"}`},[E.appName])," ",n("和")," ",e("span",{class:`font-bold ${i.isDarkMode?"text-teal-400":"text-gray-600"}`},[n("平板/手机管家")])," ",n("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){we(t.package_name).then(async v=>{await g.initDefault(),f.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>e("p",null,[n("已经成功为你重启对应的作用域，请查看是否生效~")])})}).catch(v=>{f.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>e("p",null,[n("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})})}}))}}},D=async()=>{await g.initDefault()},m=Ae({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:t=>{m.page=t},onUpdatePageSize:t=>{m.pageSize=t,m.page=1}});function A(){return[{title:"游戏名称",minWidth:250,key:"name",render(t,a){return e("div",null,[t.app_name&&e("p",null,[t.app_name]),t.app_name&&e("p",null,[e("span",{class:{hidden:!t.app_name}},[n("(")]),t.package_name,e("span",{class:{hidden:!t.app_name}},[n(")")])])])}},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render(t,a){return T[t.game_ratio]&&T[t.game_ratio].label?e(c("n-tag"),{dashed:!0,type:T[t.game_ratio].type,color:T[t.game_ratio].color},{default:()=>[T[t.game_ratio].label]}):e(c("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[n("自定义")]})}},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render(t,a){return e(c("n-tag"),{dashed:!0,type:O[t.game_gravity].color},{default:()=>[O[t.game_gravity].label]})}},{title:"操作",minWidth:100,key:"setting",render(t,a){const b={icon:xe};return e(c("n-button"),{onClick:()=>G(t),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[n("管理")],...b})}}]}return(t,a)=>{const b=c("n-alert"),E=c("n-input-group"),o=c("n-card"),u=c("n-data-table");return $(),Z(ee,null,[y("main",$e,[y("div",Ke,[y("div",Pe,[a[6]||(a[6]=y("h3",{class:j("text-base font-semibold leading-7")},[y("span",{class:"font-semibold animated-bg bg-clip-text text-transparent",style:{"background-image":"linear-gradient(101.22deg, rgb(255, 182, 133) -18.32%, rgb(255, 111, 29) 7.01%, rgb(252, 181, 232) 41.59%, rgb(135, 148, 255) 70.98%, rgb(60, 112, 255) 91.35%, rgb(60, 112, 255) 110.17%)"}},"游戏显示布局")],-1)),y("p",{class:j(`mt-1 max-w-2xl text-sm leading-6 ${r(i).isDarkMode?"text-gray-300":"text-gray-500"}`)}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),e(o,{size:"small"},{default:l(()=>[y("div",he,[r(i).deviceCharacteristics==="tablet"?($(),ye(b,{key:0,"show-icon":!0,type:"info"},{default:l(()=>[a[8]||(a[8]=y("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),a[9]||(a[9]=y("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),e(r(w),{strong:"",secondary:"",type:"info",onClick:a[0]||(a[0]=()=>k())},{default:l(()=>a[7]||(a[7]=[n("获取修改版手机/平板管家")])),_:1})]),_:1})):De("",!0)]),y("div",je,[e(r(w),{class:"mb-3 mr-3",type:"info",loading:r(i).loading||r(g).loading,onClick:a[1]||(a[1]=()=>M())},{icon:l(()=>[e(r(N),null,{default:l(()=>[e(r(be))]),_:1})]),default:l(()=>[a[10]||(a[10]=n(" 添加游戏 "))]),_:1},8,["loading"]),e(r(w),{class:"mb-3 mr-3",type:"success",loading:r(i).loading||r(g).loading,onClick:a[2]||(a[2]=()=>D())},{icon:l(()=>[e(r(N),null,{default:l(()=>[e(r(Te))]),_:1})]),default:l(()=>[a[11]||(a[11]=n(" 刷新游戏列表 "))]),_:1},8,["loading"])]),e(E,null,{default:l(()=>[e(r(Oe),{size:"large",clearable:"",value:r(g).searchKeyWord,"onUpdate:value":a[3]||(a[3]=v=>r(g).searchKeyWord=v),ref_key:"searchKeyWordInput",ref:s,placeholder:"搜索游戏名称/游戏包名",autosize:"",style:{width:"80%"}},null,8,["value"]),e(r(w),{size:"large",type:"primary",onClick:a[4]||(a[4]=()=>{var v;(v=s.value)==null||v.blur()})},{icon:l(()=>[e(r(N),null,{default:l(()=>[e(r(Re))]),_:1})]),default:l(()=>[a[12]||(a[12]=n(" 搜索 "))]),_:1}),e(r(w),{size:"large",bordered:"",onClick:a[5]||(a[5]=()=>{r(g).searchKeyWord=""})},{icon:l(()=>[e(r(N),null,{default:l(()=>[e(r(ke))]),_:1})]),default:l(()=>[a[13]||(a[13]=n(" 清空 "))]),_:1})]),_:1})]),_:1}),e(u,{loading:r(i).loading||r(g).loading,columns:r(p),data:r(g).filterGameBoosterList,pagination:m},null,8,["loading","columns","data","pagination"])]),e(Ye,{ref_key:"updateGameBoosterAppDrawer",ref:R,type:"update",title:"更新设置"},null,512)],64)}}});export{Qe as default};
