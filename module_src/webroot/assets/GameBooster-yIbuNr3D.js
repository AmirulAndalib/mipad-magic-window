import{C as Z,D as ie,E as de,F as pe,G as ce,f as z,k as W,g as E,H as ge,d as q,I as me,r as y,h as J,J as Fe,x as Ee,i as X,j as ee,e as c,K as ve,L as fe,M as Ce,m as e,b as n,s as r,l as o,N as H,O as te,t as ue,v as oe,P as ye,Q as Be,R as Ae,S as _e,n as j,T as be,c as De,U as b,p as ke,V as k,W as Te,X as we,Y as Oe,Z as Re,$ as Q,a0 as Ge,a1 as xe,a2 as Ie,a3 as Se,q as Me,a4 as Ne,a5 as Ve,a6 as ze,a7 as h,a8 as Ue,a9 as Le,aa as $e,ab as he}from"./index-CSR8tbEy.js";function We(g,i,p,s){return Z(g,function(F,v,R){i(s,p(F),v,R)}),s}function Ye(g,i){return function(p,s){return We(p,g,i(s),{})}}var Pe=Object.prototype,Ke=Pe.toString,ne=Ye(function(g,i,p){i!=null&&typeof i.toString!="function"&&(i=Ke.call(i)),g[i]=p},ie(de));function U(g,i){var p={};return i=pe(i),Z(g,function(s,F,v){ce(p,i(s,F,v),s)}),p}function He(g,i){return z(),W("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[E("path",{"fill-rule":"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 0 1 .75.75c0 5.056-2.383 9.555-6.084 12.436A6.75 6.75 0 0 1 9.75 22.5a.75.75 0 0 1-.75-.75v-4.131A15.838 15.838 0 0 1 6.382 15H2.25a.75.75 0 0 1-.75-.75 6.75 6.75 0 0 1 7.815-6.666ZM15 6.75a2.25 2.25 0 1 0 0 4.5 2.25 2.25 0 0 0 0-4.5Z","clip-rule":"evenodd"}),E("path",{d:"M5.26 17.242a.75.75 0 1 0-.897-1.203 5.243 5.243 0 0 0-2.05 5.022.75.75 0 0 0 .625.627 5.243 5.243 0 0 0 5.022-2.051.75.75 0 1 0-1.202-.897 3.744 3.744 0 0 1-3.008 1.51c0-1.23.592-2.323 1.51-3.008Z"})])}const je=ne({RATIO_FULLSCREEN:"0.0",RATIO_16_TO_9:"1.7777778",RATIO_4_TO_3:"1.3333333",RATIO_21_TO_9:"2.3333333",RATIO_32_TO_9:"3.5555556"}),Qe={RATIO_FULLSCREEN:{type:"info",name:"全屏",color:{}},RATIO_16_TO_9:{type:"error",name:"16:9",color:{}},RATIO_4_TO_3:{type:"success",name:"4:3",color:{}},RATIO_21_TO_9:{type:"warning",name:"21:9",color:{}},RATIO_32_TO_9:{type:"primary",name:"32:9",color:{color:"rgba(255, 105, 180, 0.1)",borderColor:"rgba(255, 105, 180, 0.3)",textColor:"#ff69b4"}}},ae=g=>{console.log(g,"inputArr");const i=ge(g);let p=Object.entries(je).map(([s,F])=>{const v=Qe[F];return{label:v.name,value:s,type:v.type,color:v.color}});return i&&(p=[...p,...i]),p},Ze=ne({GRAVITY_CENTER:17,GRAVITY_TOP:48,GRAVITY_BOTTOM:80}),qe={GRAVITY_CENTER:{color:"info",name:"居中显示"},GRAVITY_TOP:{color:"success",name:"居顶显示"},GRAVITY_BOTTOM:{color:"error",name:"居底显示"}},le=()=>Object.entries(Ze).map(([g,i])=>{const p=qe[i];return{label:p.name,value:g,color:p.color}}),Je=q({__name:"GameBoosterAppDrawer",props:{type:{},title:{}},emits:["submit"],setup(g,{expose:i,emit:p}){me(),y(null),y(null);const s=g,F=y(!1),v=ae([{label:"自定义",value:"custom",type:"primary",color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}}]),R=U(v,a=>a.value),f=le(),Y=U(f,a=>a.value),d=J();Fe(),Ee();const L=X(()=>({theme:d.isDarkMode?ue:oe})),{message:T,modal:M}=ee(["message","modal"],{configProviderProps:L});let N,V;const G=y({openDrawer:a=>new Promise((u,A)=>{if(s.type==="update"&&!a){A(new Error("更新模式下必须传入初始化参数")),T.error("初始化参数不能为空");return}s.type==="update"&&(I.value=(a==null?void 0:a.packageName)||"",x.value=(a==null?void 0:a.appName)||"",a!=null&&a.gameGravity&&(D.value=Y[a.gameGravity]),a!=null&&a.gameRatio&&(R[a.gameRatio]?(B.value=R[a.gameRatio],_.value=a.gameRatio):(B.value=R.custom,_.value=a.gameRatio))),N=u,V=A,F.value=!0}),closeDrawer:()=>{F.value=!1,V("Drawer closed without submission")}}),x=y(""),I=y(""),D=y(f[0]),B=y(v[0]),_=y(""),S=(a,u)=>{if(u.value==="custom"&&!d.ABTestInfo.GAME_BOOSTER_CUSTOM_RATIO){M.create({title:"无使用权限",type:"warning",preset:"dialog",content:()=>e("div",null,[e("p",null,[r("自定义游戏比例存在使用风险，如果配置了不恰当的自定义游戏比例，可能会触发部分游戏风控导致游戏账号被封！")]),e("p",null,[r("如仍然坚持使用自定义游戏比例，请前往模块设置导入激活口令激活自定义游戏比例：")]),e("p",null,[r("eNqrVnJ39HWNd/L3Dw5xDYp3Dg0O8feND3IM8fRXsiopKk2tBQC2Pwrm")])])});return}B.value=u,u.value==="custom"?_.value="":_.value=u.value},$=(a,u)=>{D.value=u},l=async()=>{if(!_.value){M.create({title:"游戏显示比例不能为空",type:"error",preset:"dialog",content:()=>e("p",null,[r("噫？游戏显示比例不能为空（敲")])});return}t.value=!0;const a=()=>{t.value=!1,F.value=!1},u=()=>{t.value=!1},A={appName:x.value,packageName:I.value,gameGravity:D.value.value,gameRatio:_.value,loadingCallback:u,closeCallback:a};M.create({title:"确认调整游戏显示布局吗？",type:"warning",preset:"dialog",content:()=>e("p",null,[r("调整后会改变游戏的显示比例，获得更大的游戏视野，但并非所有游戏都兼容游戏显示比例调整，且部分游戏可能会对游戏显示比例的修改作为风控管理，可能导致游戏账号被封禁，调整游戏显示布局前，即认可并了解这些须知。确定要继续吗？")]),positiveText:"确定调整",negativeText:"我再想想",onPositiveClick:async()=>{N(A),u(),a()},onNegativeClick(){u()},onMaskClick(){u()},onClose(){u()}})},t=y(!1);return i({openDrawer:G.value.openDrawer}),(a,u)=>{const A=c("n-input-group-label"),w=c("n-input"),O=c("n-input-group"),C=c("n-button"),P=c("n-dropdown"),K=c("n-card"),re=c("n-drawer-content"),se=c("n-drawer");return z(),W(te,null,[ve(a.$slots,"default",fe(Ce({openDrawer:G.value.openDrawer}))),e(se,{show:F.value,"onUpdate:show":u[7]||(u[7]=m=>F.value=m),width:o(d).windowWidth>=640?"450px":"100%",placement:"right"},{default:n(()=>[e(re,{"body-content-class":"auto-ui-drawer-content","scrollbar-props":{trigger:"none"},title:s.title,closable:""},{footer:n(()=>[e(C,{type:"info",loading:t.value,"onUpdate:loading":u[5]||(u[5]=m=>t.value=m),onClick:u[6]||(u[6]=()=>l())},{default:n(()=>u[10]||(u[10]=[r(" 提交 ")])),_:1},8,["loading"])]),default:n(()=>[e(O,null,{default:n(()=>[e(A,{size:"large"},{default:n(()=>u[8]||(u[8]=[r("游戏名称")])),_:1}),e(w,{size:"large",value:x.value,"onUpdate:value":u[0]||(u[0]=m=>x.value=m),readonly:!0,placeholder:"请输入游戏名称"},null,8,["value"])]),_:1}),e(O,{class:"mt-5"},{default:n(()=>[e(A,{size:"large"},{default:n(()=>u[9]||(u[9]=[r("游戏包名")])),_:1}),e(w,{size:"large",value:I.value,"onUpdate:value":u[1]||(u[1]=m=>I.value=m),readonly:!0,placeholder:"请输入游戏包名"},null,8,["value"])]),_:1}),e(K,{bordered:!1,title:"游戏显示比例",size:"small"},{default:n(()=>[e(P,{value:B.value,"onUpdate:value":u[2]||(u[2]=m=>B.value=m),size:"large",trigger:"click",options:o(v),onSelect:S},{default:n(()=>{var m;return[e(C,{block:"",type:B.value.type,color:(m=B.value.color)==null?void 0:m.textColor,dashed:""},{default:n(()=>[r(H(B.value.label),1)]),_:1},8,["type","color"])]}),_:1},8,["value","options"]),e(O,{class:"mt-5"},{default:n(()=>[e(w,{type:"number",ref:"currentCustomGameRatioRef",readonly:B.value.value!=="custom",value:_.value,"onUpdate:value":u[3]||(u[3]=m=>_.value=m),placeholder:"请输入游戏显示比例"},null,8,["readonly","value"])]),_:1})]),_:1}),e(K,{bordered:!1,title:"游戏显示位置",size:"small"},{default:n(()=>[e(P,{value:D.value,"onUpdate:value":u[4]||(u[4]=m=>D.value=m),size:"large",trigger:"click",options:o(f),onSelect:$},{default:n(()=>[e(C,{block:"",type:D.value.color,dashed:""},{default:n(()=>[r(H(D.value.label),1)]),_:1},8,["type"])]),_:1},8,["value","options"])]),_:1})]),_:1},8,["title"])]),_:1},8,["show","width"])],64)}}}),Xe={class:"autoui-view mb-10"},et={class:"mt-3"},tt={class:"mb-3 px-4 sm:px-0"},ut={class:"mb-3 flex flex-wrap"},ot={class:"flex flex-wrap"},nt={class:"flex flex-wrap"},lt=q({__name:"GameBooster",setup(g){const i=y(null),p=$(),s=J(),F=be();ye();const v=X(()=>({theme:s.isDarkMode?ue:oe})),{message:R,modal:f,notification:Y}=ee(["message","modal","notification"],{configProviderProps:v}),d=Be(),L=ae(),T=U(L,l=>l.value),M=le(),N=U(M,l=>l.value),V=Ae(),G=y(null),x=async()=>{if(!V.isSupportGameMode.value){f.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>e("p",null,[r("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){F.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const a=new MutationObserver(()=>{const u=document.getElementById("gameModeSettings");u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),a.disconnect())});a.observe(document.body,{childList:!0,subtree:!0})})}});return}const[l,t]=await h(Ue());l&&f.create({title:"操作失败",type:"error",preset:"dialog",content:()=>e("p",null,[r("发生异常错误，详细错误请查看日志~")])})},I=async()=>{f.create({title:"获取手机/平板管家",type:"info",preset:"dialog",content:()=>e("div",null,[e("p",null,[r("如果规则无法生效，还需要安装修改版的手机/平板管家才会生效，安装后如出现崩溃等异常，推荐清空管家数据并重启设备再尝试~")]),e("p",null,[r("(Tips:需搭配核心破解并通过MT管理器安装)")]),e("p",null,[r("下载地址:https://caiyun.139.com/m/i?135CeBMHACC6p")])]),positiveText:"复制下载链接到剪切板",negativeText:"取消",onPositiveClick:()=>{navigator.clipboard.writeText("https://caiyun.139.com/m/i?135CeBMHACC6p")},onNegativeClick:()=>{}})},D=()=>{F.push({name:"settings",hash:"#displayModeSettings"}).then(()=>{const l=new MutationObserver(()=>{const t=document.getElementById("displayModeSettings");t&&(t.scrollIntoView({behavior:"smooth",block:"center"}),l.disconnect())});l.observe(document.body,{childList:!0,subtree:!0})})},B=async(l,t)=>{if(!V.isSupportGameMode.value){f.create({title:"未开启游戏显示布局",type:"warning",preset:"dialog",content:()=>e("p",null,[r("未开启游戏显示布局，请先前往模块设置进行开启~")]),positiveText:"立即前往",negativeText:"取消",onPositiveClick(){F.push({name:"settings",hash:"#gameModeSettings"}).then(()=>{const a=new MutationObserver(()=>{const u=document.getElementById("gameModeSettings");u&&(u.scrollIntoView({behavior:"smooth",block:"center"}),a.disconnect())});a.observe(document.body,{childList:!0,subtree:!0})})}});return}if(G.value){const[a,u]=await h(G.value.openDrawer({appName:l.app_name,packageName:l.package_name,gameRatio:l.game_ratio,gameGravity:l.game_gravity}));if(a)console.log("操作取消:",a);else if(u){d.loading=!0;const[A,w]=await h(Le(u.packageName,u.gameRatio,u.gameGravity));A&&(f.create({title:"更新设置失败",type:"error",preset:"dialog",content:()=>e("p",null,[r("发生异常错误，更新失败了QwQ，详细错误请查看错误日志~")])}),d.loading=!1),w&&(d.loading=!1,f.create({title:"更新设置成功",type:"success",preset:"dialog",content:()=>e("p",null,[r("好耶w，已经成功配置")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[u.appName])," ",r("的游戏显示布局了OwO~实际生效还需要重启")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[u.appName])," ",r("和")," ",e("span",{class:`font-bold ${s.isDarkMode?"text-teal-400":"text-gray-600"}`},[r("平板/手机管家")])," ",r("的作用域，确定要继续吗？")]),positiveText:"确定重启作用域",negativeText:"稍后手动重启",onPositiveClick(){$e(l.package_name).then(async O=>{await d.initDefault(),f.create({title:"重启作用域成功",type:"success",preset:"dialog",content:()=>e("p",null,[r("已经成功为你重启对应的作用域，请查看是否生效~")])})}).catch(O=>{f.create({title:"重启作用域失败",type:"error",preset:"dialog",content:()=>e("p",null,[r("发生异常错误，重启系统界面作用域失败QwQ，详细错误请查看日志~")])})})}}))}}},_=async()=>{await d.initDefault()},S=_e({page:1,pageSize:10,simple:!0,showSizePicker:!0,onChange:l=>{S.page=l},onUpdatePageSize:l=>{S.pageSize=l,S.page=1}});function $(){return[{title:"游戏名称",minWidth:250,key:"name",render(l,t){return e("div",null,[l.app_name&&e("p",null,[l.app_name]),l.app_name&&e("p",null,[e("span",{class:{hidden:!l.app_name}},[r("(")]),l.package_name,e("span",{class:{hidden:!l.app_name}},[r(")")])])])}},{title:"游戏显示比例",minWidth:150,key:"game_ratio",render(l,t){return T[l.game_ratio]&&T[l.game_ratio].label?e(c("n-tag"),{dashed:!0,type:T[l.game_ratio].type,color:T[l.game_ratio].color},{default:()=>[T[l.game_ratio].label]}):e(c("n-tag"),{dashed:!0,color:{color:"rgba(155, 89, 182, 0.1)",borderColor:"rgba(155, 89, 182, 0.3)",textColor:"#9b59b6"}},{default:()=>[r("自定义")]})}},{title:"游戏显示位置",minWidth:150,key:"game_gravity",render(l,t){return e(c("n-tag"),{dashed:!0,type:N[l.game_gravity].color},{default:()=>[N[l.game_gravity].label]})}},{title:"操作",minWidth:100,key:"setting",render(l,t){const a={icon:he};return e(c("n-button"),{onClick:()=>B(l),size:"small",strong:!0,dashed:!0,type:"info"},{default:()=>[r("管理")],...a})}}]}return(l,t)=>{const a=c("n-alert"),u=c("n-dropdown"),A=c("n-input-group"),w=c("n-card"),O=c("n-data-table");return z(),W(te,null,[E("main",Xe,[E("div",et,[E("div",tt,[t[10]||(t[10]=E("h3",{class:j("text-base font-semibold leading-7")},[E("span",{class:"animated-bg bg-clip-text font-semibold text-transparent",style:{"background-image":`linear-gradient(\r
								101.22deg,\r
								rgb(255, 182, 133) -18.32%,\r
								rgb(255, 111, 29) 7.01%,\r
								rgb(252, 181, 232) 41.59%,\r
								rgb(135, 148, 255) 70.98%,\r
								rgb(60, 112, 255) 91.35%,\r
								rgb(60, 112, 255) 110.17%\r
							)`}},"游戏显示布局")],-1)),E("p",{class:j(`mt-1 max-w-2xl text-sm leading-6 ${o(s).isDarkMode?"text-gray-300":"text-gray-500"}`)}," 游戏显示布局，改变游戏比例，获得更大的游戏视野。 ",2)])]),e(w,{size:"small"},{default:n(()=>[E("div",ut,[o(s).deviceCharacteristics==="tablet"?(z(),De(a,{key:0,"show-icon":!0,type:"info"},{default:n(()=>[t[12]||(t[12]=E("p",null,"请添加需要管理的游戏应用到游戏工具箱，Hyper OS 2.0+还需要安装修改版的手机/平板管家才会生效。",-1)),t[13]||(t[13]=E("p",null,"修改版的手机/平板管家支持Hyper OS 2.0/1.0和MIUI 14:",-1)),e(o(b),{strong:"",secondary:"",type:"info",onClick:t[0]||(t[0]=()=>I())},{default:n(()=>t[11]||(t[11]=[r("获取修改版手机/平板管家")])),_:1})]),_:1})):ke("",!0)]),E("div",ot,[e(o(b),{class:"mb-3 mr-3",type:"info",loading:o(s).loading||o(d).loading,onClick:t[1]||(t[1]=()=>x())},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(Te))]),_:1})]),default:n(()=>[t[14]||(t[14]=r(" 添加游戏 "))]),_:1},8,["loading"]),e(o(b),{class:"mb-3 mr-3",type:"success",loading:o(s).loading||o(d).loading,onClick:t[2]||(t[2]=()=>_())},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(we))]),_:1})]),default:n(()=>[t[15]||(t[15]=r(" 刷新游戏列表 "))]),_:1},8,["loading"])]),E("div",nt,[e(u,{size:"large",trigger:"click",options:[{label:"打开性能监视器",key:"start"},{label:"关闭性能监视器",key:"stop"}],onSelect:t[3]||(t[3]=C=>{Oe(C)})},{default:n(()=>[e(o(b),{class:"mb-3 mr-3",color:"#8a2be2",type:"info",secondary:"",loading:o(s).loading||o(d).loading},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(Re))]),_:1})]),default:n(()=>[t[16]||(t[16]=r(" 性能监视器 "))]),_:1},8,["loading"])]),_:1}),e(u,{size:"large",trigger:"click",options:[{label:"打开帧率监视器",key:"open"},{label:"关闭帧率监视器",key:"close"}],onSelect:t[4]||(t[4]=C=>{C==="open"?Q(!0):Q(!1)})},{default:n(()=>[e(o(b),{class:"mb-3 mr-3",type:"info",secondary:"",loading:o(s).loading||o(d).loading},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(Ge))]),_:1})]),default:n(()=>[t[17]||(t[17]=r(" 帧率监视器 "))]),_:1},8,["loading"])]),_:1}),e(o(b),{class:"mb-3 mr-3",type:"success",secondary:"",loading:o(s).loading||o(d).loading,onClick:D},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(He))]),_:1})]),default:n(()=>[t[18]||(t[18]=r(" 分辨率及刷新率 "))]),_:1},8,["loading"]),e(o(b),{class:"mb-3 mr-3",type:"warning",secondary:"",loading:o(s).loading||o(d).loading,onClick:t[5]||(t[5]=()=>xe())},{icon:n(()=>[e(o(k),null,{default:n(()=>t[19]||(t[19]=[E("img",{src:Ie},null,-1)])),_:1})]),default:n(()=>[t[20]||(t[20]=r(" 应用抽屉 "))]),_:1},8,["loading"]),e(o(b),{class:"mb-3 mr-3",type:"error",secondary:"",loading:o(s).loading||o(d).loading,onClick:t[6]||(t[6]=()=>Se())},{icon:n(()=>[e(o(k),null,{default:n(()=>t[21]||(t[21]=[E("img",{src:Me},null,-1)])),_:1})]),default:n(()=>[t[22]||(t[22]=r(" 超级小爱 "))]),_:1},8,["loading"])]),e(A,null,{default:n(()=>[e(o(Ne),{size:"large",clearable:"",value:o(d).searchKeyWord,"onUpdate:value":t[7]||(t[7]=C=>o(d).searchKeyWord=C),ref_key:"searchKeyWordInput",ref:i,placeholder:"搜索游戏名称/游戏包名",autosize:"",style:{width:"80%"}},null,8,["value"]),e(o(b),{size:"large",type:"primary",onClick:t[8]||(t[8]=()=>{var C;(C=i.value)==null||C.blur()})},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(Ve))]),_:1})]),default:n(()=>[t[23]||(t[23]=r(" 搜索 "))]),_:1}),e(o(b),{size:"large",bordered:"",onClick:t[9]||(t[9]=()=>{o(d).searchKeyWord=""})},{icon:n(()=>[e(o(k),null,{default:n(()=>[e(o(ze))]),_:1})]),default:n(()=>[t[24]||(t[24]=r(" 清空 "))]),_:1})]),_:1})]),_:1}),e(O,{loading:o(s).loading||o(d).loading,columns:o(p),class:"mt-3",data:o(d).filterGameBoosterList,pagination:S},null,8,["loading","columns","data","pagination"])]),e(Je,{ref_key:"updateGameBoosterAppDrawer",ref:G,type:"update",title:"更新设置"},null,512)],64)}}});export{lt as default};
